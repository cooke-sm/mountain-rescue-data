library("polite")
install.packages("polite")
library("polite")
bow("https://edalemrt.co.uk/")
robotstxt::get_robotstxt("https://edalemrt.co.uk/")
url <- "https://edalemrt.co.uk/incidents/"
edale_bow <- bow("https://edalemrt.co.uk/")
library("polite")
edale_bow <- bow("https://edalemrt.co.uk/")
?scrape
edale_scrape <- scrape(edale_bow,"incidents")
edale_scrape <- scrape(edale_bow,list("incidents"))
edale_scrape <- scrape(edale_bow,list(param1 = "incidents"))
View(edale_scrape)
View(edale_scrape)
edale <-  rvest::xml_nodes(edale_scrape$node)
edale_scrape$node
str(edale_scrape)
View(edale_scrape)
edale_scrape[1]
edale_scrape[1,1]
library(rvest)
edale_scrape %>% html_nodes()
edale_scrape %>% html_nodes("/html/body/div[4]/div/main/div[2]/div/div/div/div[1]")
edale_scrape %>% html_nodes("/html/body/div[4]/div/main/div[2]/div/div/div/div[1]")
edale_scrape %>% html_nodes(`/html/body/div[4]/div/main/div[2]/div/div/div/div[1]`)
View(edale_scrape)
edale_scrape %>% rvest::html_nodes(".incidents__item pb-3 lazyloaded")
library(polite)
library(rvest)
library(rvest)
url <- "https://edalemrt.co.uk/incidents/"
edale <- read_html(url)
View(edale)
html_nodes(edale_scrape, ".incidents__item pb-3 lazyloaded")
nodes <- html_nodes(edale_scrape)
nodes <- html_nodes(edale)
nodes <- html_nodes(edale, ".incidents__item pb-3 lazyloaded")
View(nodes)
nodes <- html_nodes(edale, ".incidents_")
View(nodes)
nodes <- html_nodes(edale, "")
nodes <- html_nodes(edale, ".")
nodes <- html_nodes(edale, ".container-fluid")
View(nodes)
nodes[[1]]
nodes <- html_nodes(edale, ".incidents__item__description pb-3")
View(nodes)
nodes <- html_nodes(edale, ".incidents__item")
View(nodes)
nodes[[1]]
nodes[[1]][3]
nodes[[1]][[[3]]
nodes[[1]]
nodes <- html_nodes(edale, ".incidents__item__description")
nodes
nodes <- html_nodes(edale, ".incidents__item")
nodes
nodes[[1]]
nodes[[1]][[1]]
nodes[[1]][1]
html_name(nodes)
html_node(nodes)
html_node(nodes,1)
html_node(nodes,"incidents__item")
html_node(nodes,"incidents__item__description")
nodes[[1]]
html_node(nodes,".incidents__item__description")
location <- html_node(nodes,".display")
incidents <- html_node(nodes,".incidents__item__description")
location
location <- html_node(nodes,".fas")
location
nodes[[1]]
location <- html_node(nodes,".d-flex")
location
dates <- html_node(nodes,".d-flex")
nodes[[1]]
location <- html_node(nodes,".display")
location
nodes[[1]]
html_text(nodes[[1]])
html_text(nodes[[1]],trim = TRUE)
html_text(nodes,trim = TRUE)
html_text(dates,trim = TRUE)
dates
dates <- html_node(nodes,".d-flex .fas")
dates
html_text(dates,trim = TRUE)
dates <- html_node(nodes,".d-flex")
dates
dates <- html_node(nodes,".incidents__item__date")
dates
html_text(dates,trim = TRUE)
dates <- html_node(nodes,".incidents__item__date") %>% html_text()
dates
dates <- html_node(nodes,".incidents__item__date") %>% html_text(trim = TRUE)
dates
team_members <- html_node(nodes,".incidents__")
dates
team_members
team_members <- html_node(nodes,".incidents")
team_members
team_members <- html_node(nodes,"")
team_members
team_members <- html_node(nodes,)
nodees[[1]]
nodes[[1]]
team_members <- html_node(nodes,".d-flex")
team_members
team_members[1]
View(team_members)
team_members <- html_node(nodes,".incidents__item__teammembers")
team_members[1]
team_members <- html_node(nodes,".incidents__item__team_members")
team_members[1]
team_members <- html_node(nodes,".incidents__item__team_members") %>% html_text(trim = TRUE)
team_members[1]
location <- html_node(nodes,".h3")
location
location %>% html_text()
nodes[[1]]
location <- html_element(nodes,"h3")
location
location %>% html_text()
location <- html_element(nodes,"h3") %>% html_text(trim = TRUE)
x = list()
for(i in seq_along(nodes)){
incidents <- html_node(nodes[[i]],".incidents__item__description")
dates <- html_node(nodes[[i]],".incidents__item__date") %>% html_text(trim = TRUE)
team_members <- html_node(nodes[[i]],".incidents__item__team_members") %>% html_text(trim = TRUE)
location <- html_element(nodes[[i]],"h3") %>% html_text(trim = TRUE)
x[i] = list(incidents,dates,team_members,location)
}
View(x)
x = list()
for(i in seq_along(nodes)){
incidents <- html_node(nodes[[i]],".incidents__item__description") %>% html_text(trim = TRUE)
dates <- html_node(nodes[[i]],".incidents__item__date") %>% html_text(trim = TRUE)
team_members <- html_node(nodes[[i]],".incidents__item__team_members") %>% html_text(trim = TRUE)
location <- html_element(nodes[[i]],"h3") %>% html_text(trim = TRUE)
x[i] = list(incidents,dates,team_members,location)
}
x[1]
x[[[1]]
x[[1]]
nodes[[1]]
x[[2]]
x[[2]][1]
x[2][1]
x[2]
x[3]
x = list()
for(i in seq_along(nodes)){
incidents <- html_node(nodes[[i]],".incidents__item__description") %>% html_text(trim = TRUE)
dates <- html_node(nodes[[i]],".incidents__item__date") %>% html_text(trim = TRUE)
team_members <- html_node(nodes[[i]],".incidents__item__team_members") %>% html_text(trim = TRUE)
location <- html_element(nodes[[i]],"h3") %>% html_text(trim = TRUE)
x[[i]] <-  list(incidents,dates,team_members,location)
}
x[3]
data.frame(x)
y <- data.frame(x)
View(y)
output = list()
for(i in seq_along(nodes)){
incidents <- html_node(nodes[[i]],".incidents__item__description") %>% html_text(trim = TRUE)
dates <- html_node(nodes[[i]],".incidents__item__date") %>% html_text(trim = TRUE)
team_members <- html_node(nodes[[i]],".incidents__item__team_members") %>% html_text(trim = TRUE)
location <- html_element(nodes[[i]],"h3") %>% html_text(trim = TRUE)
output[[i]] <-  list(incident = incidents,date = dates, n_team =team_members,loc = location)
}
output["loc"]
output[]
output$loc
output[[1]]$loc
tibble(output)
library(tidyverse)
tibble(output)
as_tibble(output)
as_tibble_row(output)
x = list(c = "three", d = list(4:5))
x
as_tibble_row(x)
x <- tibble(incident = map(output, "incident"))
x <- tibble(incident = map(output, "incident"),
date = map(output, "date"),
n_team = map(output, "n_team"),
loc = map(output, "loc"))
View(x)
data <- tibble(incident = map(output, "incident"),
date = map(output, "date"),
n_team = map(output, "n_team"),
loc = map(output, "loc"))
data %>%
mutate(incident_n = str_extract(incident, "(i|I)ncident \\d+")) %>% view()
data %>%
mutate(incident_n = parse_integer(str_extract(incident, "(i|I)ncident \\d+"))) %>% view()
?parse_integer
data %>%
mutate(incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+"))) %>% view()
data %>%
mutate(incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
team_n = parse_number(team_n)) %>% view()
data %>%
mutate(incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(n_team)) %>% view()
View(data)
data %>%
mutate(incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(n_team)) %>% view()
data %>%
mutate(incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = str_extract(n_team,"\\d+")) %>% view()
data %>%
mutate(incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+"))) %>% view()
library(rvest)
library(tidyverse)
url <- "https://edalemrt.co.uk/incidents/"
edale <- read_html(url)
nodes <- html_nodes(edale, ".incidents__item")
output = list()
for(i in seq_along(nodes)){
incidents <- html_node(nodes[[i]],".incidents__item__description") %>% html_text(trim = TRUE)
dates <- html_node(nodes[[i]],".incidents__item__date") %>% html_text(trim = TRUE)
team_members <- html_node(nodes[[i]],".incidents__item__team_members") %>% html_text(trim = TRUE)
location <- html_element(nodes[[i]],"h3") %>% html_text(trim = TRUE)
output[[i]] <-  list(incident = incidents,date = dates, n_team =team_members,loc = location)
}
data <- tibble(incident = map(output, "incident"),
date = map(output, "date"),
n_team = map(output, "n_team"),
loc = map(output, "loc"))
data %>%
mutate(incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+"))) %>% view()
edale_data <- data %>%
mutate(incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")))
edale_data <- data %>%
mutate(incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = str_extract(date, "(?<=:).*"))
edale_data
edale_data <- data %>%
mutate(incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = parse_date(str_extract(date, "(?<=:).*"), "%d %b %Y"))
edale_data <- data %>%
mutate(incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = parse_date(str_extract(date, "(?<=:).*"), "%+ %d %b %Y"))
edale_data
edale_data
edale_data %>%
ggplot(aes(x=date))+
geom_bar()
edale_data %>%
ggplot(aes(x=date))+
geom_dotplot()
edale_data %>%
ggplot(aes(x=date))+
geom_dotplot(binwidth = 7)
edale_data %>%
ggplot(aes(x=date))+
geom_dotplot(bins = 52)
edale_data %>%
ggplot(aes(x=date))+
geom_dotplot(binwidth = 7)
edale_data %>%
ggplot(aes(x=date))+
geom_dotplot(binwidth = 52)
edale_data %>%
ggplot(aes(x=date))+
geom_dotplot(binwidth = 7)
edale_data %>%
ggplot(aes(x=date))+
geom_dotplot(binwidth = 1)
edale_data %>%
ggplot(aes(x=date))+
geom_dotplot(binwidth = 7)
edale_data %>%
ggplot(aes(x=date))+
geom_dotplot(binwidth = 1)
edale_data %>%
ggplot(aes(x=date))+
geom_bar()
edale_data %>%
ggplot(aes(y=loc))+
geom_bar()
edale_data %>%
ggplot(aes(x=loc))+
geom_bar()
View(edale_data)
edale_data %>% n_distinct(loc)
View(edale_data)
summary(edale_data$loc0
summary(edale_data$loc)
edale_data$loc
str(edale_data$loc)
str(edale_data)
edale_data
edale_data <- data %>%
mutate(incident = incident[[1]],
incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = parse_date(str_extract(date, "(?<=:).*"), "%+ %d %b %Y"))
edale_data
edale_data <- data %>%
mutate(incident = incident[[1]],
loc = loc[[1]],
incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = parse_date(str_extract(date, "(?<=:).*"), "%+ %d %b %Y"))
edale_data
edale_data %>%
n_distinct(loc)
edale_data %>% count(loc)
edale_data <- data %>%
mutate(incident = inciden[row_number()],
loc = loc[[1]],
incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = parse_date(str_extract(date, "(?<=:).*"), "%+ %d %b %Y"))
edale_data <- data %>%
mutate(incident = incident[row_number()],
loc = loc[[1]],
incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = parse_date(str_extract(date, "(?<=:).*"), "%+ %d %b %Y"))
View(edale_data)
edale_data <- data %>%
mutate(incident = incident[row_number()],
loc = loc[row_number()],
incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = parse_date(str_extract(date, "(?<=:).*"), "%+ %d %b %Y"))
edale_data %>% count(loc)
edale_data <- data %>%
mutate(incident = incident[[row_number()]],
loc = loc[[row_number()]],
incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = parse_date(str_extract(date, "(?<=:).*"), "%+ %d %b %Y"))
edale_data %>% count(loc)
edale_data <- data %>%
mutate(incident = incident[[row_number()]],
loc = loc[[row_number()]],
incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = parse_date(str_extract(date, "(?<=:).*"), "%+ %d %b %Y"))
edale_data <- data %>%
mutate(incident = map_chr(incident),
loc = loc[row_number()],
incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = parse_date(str_extract(date, "(?<=:).*"), "%+ %d %b %Y"))
edale_data <- data %>%
mutate(incident = map_chr(incident,1),
loc = loc[row_number()],
incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = parse_date(str_extract(date, "(?<=:).*"), "%+ %d %b %Y"))
edale_data
edale_data <- data %>%
mutate(incident = map_chr(incident,1),
loc = map_chr(loc,1),
incident_n = parse_number(str_extract(incident, "(i|I)ncident \\d+")),
n_team = parse_number(str_extract(n_team,"\\d+")),
date = parse_date(str_extract(date, "(?<=:).*"), "%+ %d %b %Y"))
edale_data
edale_data %>% count(loc)
edale_data %>% count(loc) %>%
arrange(desc(n))
edale_data %>% filter(loc == "Fairholmes")
